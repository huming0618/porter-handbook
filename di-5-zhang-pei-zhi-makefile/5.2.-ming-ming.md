# 5.2.命名

在 port 的 **Makefile** 中的第一部分， 将命名这个 port， 描述它的版本号， 并把它列在正确的类别中。

## 5.2.1.`PORTNAME`

将 `PORTNAME` 设为软件的基本名称。它被用作 FreeBSD 软件包的基础， 以及 `DISTNAME` 的基础。

>**注意**
>
>这个包的名字在整个 ports 树中必须是唯一的。请确保 `PORTNAME` 没有被现有的 port 使用， 并且没有其他 port 已经拥有相同的 `PKGBASE`。如果这个名字已经被使用了， 则应加入 `PKGNAMEPREFIX` 或 `PKGNAMESUFFIX`。
>

## 5.2.2.Versions，`DISTVERSION`或`PORTVERSION`

将 `DISTVERSION` 设为软件的版本号。

`PORTVERSION` 是用于 FreeBSD 软件包的版本。它将自动从 `DISTVERSION` 派生出来， 以便与 FreeBSD 的软件包版本计划兼容。如果版本包含字母，可能需要设置 `PORTVERSION` 而不是 `DISTVERSION`。

>**注意**
>
>每次只能设置 `PORTVERSION` 和 `DISTVERSION` 中的一个。
>

有时，一些软件会使用一个与 `DISTVERSION` 在P `ORTVERSION` 中的翻译方式不兼容的版本方案。

>**技巧**
>
>在更新 port 时， 可以使用 [pkg-version(8)](https://www.freebsd.org/cgi/man.cgi?query=pkg-version&sektion=8&format=html) 的 -t 参数来检查新版本是否大于或小于之前的版本。参见[使用 pkg-version(8) 来比较版本](https://docs.freebsd.org/en/books/porters-handbook/book/#makefile-versions-ex-pkg-version)。
>

>**例 6. 使用 [pkg-version(8)](https://www.freebsd.org/cgi/man.cgi?query=pkg-version&sektion=8&format=html) 来比较版本
>
>`pkg version -t` 接收两个版本作为参数，如果第一个版本小于、等于或大于第二个版本，它将分别以 `<`、`=`或`>`作为回应。
```
% pkg version -t 1.2 1.3
< 
% pkg version -t 1.2 1.2
= 
% pkg version -t 1.2 1.2.0
= 
% pkg version -t 1.2 1.2.p1
> 
% pkg version -t 1.2.a1 1.2.b1
< 
% pkg version -t 1.2 1.2p1
< 
```
>1. 1.2是在1.3之前。
>2. 1.2和1.2是平等的，因为它们的版本相同。
>3. 1.2和1.2.0是相等的，因为没有什么等于零。
>4. 1.2是在1.2.p1之后为.p1，认为是 "pre-release 1"。
>5. 1.2.a1在1.2.b1之前，认为 "α "和 "β"，a在b之前。
>6. 1.2在1.2p1之前为2p1，认为 "2，补丁级别1"，是任何2.X之后但3之前的版本。

在这里，`a`、`b` 和 `p` 被用来表示 "alpha"、"beta "或 "pre-release "和 "patch level"，但它们只是字母，而且是按字母排序的，所以可以使用任何字母，它们会被适当排序。

表1. `DISTVERSION` 和派生 `PORTVERSION` 的例子
|**DISTVERSION**|**PORTVERSION**|
|0.7.1d|0.7.1d|
|10Alpha3|10.a3|
|3Beta7-pre2|3.b7.p2|
|8:f_17|8f.17|

>**例 7.  使用 `DISTVERSION`
>
>当版本只包含由点、破折号或下划线分隔的数字时，使用 `DISTVERSION`。
```
PORTNAME=   nekoto
DISTVERSION=	1.2-4
```
>它将产生一个1.2.4的 `PORTVERSION`。
>

>**例 8.  当版本以字母或前缀开头时，使用 `DISTVERSION`。
>
>当版本以字母开始或结束，或者前缀或后缀不是版本的一部分时，使用 `DISTVERSIONPREFIX`、`DISTVERSION` 和 `DISTVERSIONSUFFIX`。
>如果版本为 `v1.2-4`。
```
PORTNAME=   nekoto
DISTVERSIONPREFIX=  v
DISTVERSION=	1_2_4
```
>有些时候，使用GitHub的项目会在其版本中使用其名称。例如，版本可能是 `nekoto-1.2-4`。
```
PORTNAME=   nekoto
DISTVERSIONPREFIX=  nekoto-
DISTVERSION=	1.2_4
```
>那些项目有时也会在版本的末尾使用一些字符串，例如 `1.2-4_RELEASE`。
```
PORTNAME=   nekoto
DISTVERSION=	1.2-4
DISTVERSIONSUFFIX=  _RELEASE
```
>或者两者都做，例如，`nekoto-1.2-4_RELEASE`。
```
PORTNAME=   nekoto
DISTVERSIONPREFIX=  nekoto-
DISTVERSION=	1.2-4
DISTVERSIONSUFFIX=  _RELEASE
```
>`DISTVERSIONPREFIX` 和 `DISTVERSIONSUFFIX `在构建 `PORTVERSION` 时不会被使用，而只在 `DISTNAME` 中使用。
>所有这些都将产生一个 `1.2.4` 的 `PORTVERSION`。
>

>**例9. 当版本含有 "alpha"、"beta "或 "pre-release "的字母时使用 `DISTVERSION`。
>当版本包含由点、破折号或下划线隔开的数字，并且用字母表示 "alpha"、"beta "或 "pre-release"，也就是在没有字母的版本之前，使用 `DISTVERSION`。
```
PORTNAME=   nekoto
DISTVERSION=	1.2-pre4
```
```
PORTNAME=   nekoto
DISTVERSION=	1.2p4
```
>两者都会产生一个 `1.2.p4` 的 `PORTVERSION`， 它比 `1.2` 早。 [pkg-version(8)](https://www.freebsd.org/cgi/man.cgi?query=pkg-version&sektion=8&format=html) 可以用来检查这个事实。
```
% pkg version -t 1.2.p4 1.2
<
```
>

>**例10. 当版本包含意味着 "补丁级别 "的字母时不使用 `DISTVERSION`。
>当版本包含的字母不是指 "alpha"、"beta "或 "pre"，而更多的是指 "补丁级别"，并且是指在没有字母的版本之后，使用 `PORTVERSION`。
```
PORTNAME=   nekoto
PORTVERSION=	1.2p4
```
>在这种情况下， 使用 `DISTVERSION` 是不可能的， 因为它会生成一个 `1.2.p4` 的版本， 而这个版本会在 `1.2` 之前而不是之后。 [pkg-version(8)](https://www.freebsd.org/cgi/man.cgi?query=pkg-version&sektion=8&format=html) 会验证这一点。
```
% pkg version -t 1.2 1.2.p4
> 
% pkg version -t 1.2 1.2p4
< 
```
>1. `1.2` 是在 `1.2.p4` 之后，在这种情况下是错误的。
>2. `1.2` 是在 `1.2p4` 之前，这正是需要的。
>

关于一些更高级的设置 `PORTVERSION` 的例子， 当软件的版本控制确实与 FreeBSD 的或 `DISTNAME` 不兼容时， 当发行文件不包含版本本身时， 请参阅 [`DISTNAME`](#makefile-distname)。

## 5.2.3. `PORTREVISION` 和 `PORTEPOCH`
### 5.2.3.1. `PORTREVISION`